# 七牛云同步助手 (MVP)

本项目是基于 PySide6 的桌面应用，用于在本地指定文件夹与七牛云对象存储空间（Bucket）之间进行单用户同步。采用本地优先策略：本地文件总是上传并覆盖服务器文件，服务器上存在但本地不存在的文件将被删除。

## 安装

1. 安装 Python 3.10+（Windows 需启用 pip）
2. 安装依赖：
```bash
pip install -r requirements.txt
```

## 运行

```bash
python app.py
```

首次运行会生成设备标识符（Device ID）。在应用中填写七牛配置（AK/SK、Bucket、域名/Region），选择本地同步文件夹，然后点击“开始同步”。

## 功能概览（MVP）
- 生成/持久化设备标识符
- 简单 Qt6 图形界面：配置、选择文件夹、启动/停止同步
- SQLite 本地数据库记录本地扫描结果与服务器索引（结构预置）
- 单用户同步流程：拉取/生成清单、计算差异、直接上传/删除（本地优先策略）

## 目录结构
- app.py：应用入口（Qt 界面）
- sync/：同步核心逻辑模块
  - config.py：配置与设备标识符持久化
  - device_id.py：生成设备标识符
  - sqlite_store.py：SQLite 表结构与存取
  - scanner.py：本地目录扫描与指纹计算（md5/qetag）
  - manifest.py：清单对象结构与序列化
  - qiniu_client.py：七牛 API 封装
  - diff.py：差异与冲突计算
  - scheduler.py：调度与单次同步流程

## 注意
- 需要在应用中配置七牛 Bucket 与访问域名（建议使用私有空间并配置私有下载 URL）。
- 清单文件固定位于服务器的 `__sync/` 目录下，不参与业务文件同步计算。
- 本程序采用单用户模式，本地文件优先，不支持多设备并发同步。
- 目前为 MVP 骨架，后续将逐步完善大文件分片、断点续传等细节。 